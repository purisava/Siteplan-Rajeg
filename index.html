<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Siteplan Rajeg</title>

<style>
body {
  margin: 0;
  background: #f5f5f5;
}

#container {
  position: relative;
  width: 1080px;
  height: 1418px;
  margin: auto;
}

#siteplan {
  width: 1080px;
  height: 1418px;
  display: block;
}

.strip {
  position: absolute;
  border-radius: 2px;
  border: 1px solid rgba(0,0,0,0.6);
  cursor: pointer;
  box-sizing: border-box;
}

.strip:hover {
  filter: brightness(1.25);
  box-shadow: 0 0 6px rgba(0,0,0,0.5);
  z-index: 10;
}

</style>
</head>

<body>

<div id="container">
  <img id="siteplan" src="Siteplan Rajeg (2).jpeg">
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwdIoQKP6zlFwUqx6QyQWwiTvYuTsPI6gs01H5PE2-uwsdoTmnZbpTVuYXToVQaZbVakg/exec";

const colors = {
  "KAVLING": "#BDBDBD",
  "BANGUN": "#A5D6A7",
  "OPEN": "#2E7D32",
  "BOOKED": "#FDD835",
  "BANK": "#FB8C00",
  "SP3K": "#64B5F6",
  "AKAD": "#E53935",
  "BERKAS": "#8E24AA"
};

function drawStrips(data) {
  document.querySelectorAll(".strip").forEach(e => e.remove());

  data.forEach(item => {
    const status = item.status.toString().trim().toUpperCase();
    const strip = document.createElement("div");
    strip.className = "strip";

    const w = item.w || 18;   // default rumah
    const h = item.h || 21;
    const r = item.r || 0;

    strip.style.left = item.x + "px";
    strip.style.top = item.y + "px";
    strip.style.width = w + "px";
    strip.style.height = h + "px";
    strip.style.background = colors[status] || "#000";
    strip.style.transform =
      `translate(-50%, -50%) rotate(${r}deg)`;

    strip.title = item.unit + " - " + item.status;
    document.getElementById("container").appendChild(strip);
  });
}

function loadData() {
  fetch(WEB_APP_URL + "?t=" + new Date().getTime())
    .then(r => r.json())
    .then(d => drawStrips(d))
    .catch(err => console.error(err));
}

loadData();
setInterval(loadData, 30000);
</script>

</body>
</html>




